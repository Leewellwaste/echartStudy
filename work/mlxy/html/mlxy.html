<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECharts 折线图</title>
    <!-- 1.引入 ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.1.2/dist/echarts.min.js"></script>
</head>
<body>
    <!-- 2.初始化盒子 -->
    <div id="chart" style="width: 400px; height: 300px;"></div>

    <script>
        // 定义函数用于获取数据和更新图表
        function upDate() {
            fetch('http://127.0.0.1:8080/weldDayLine?unitCode=马来西亚项目')
                .then(response => response.json())
                .then(data => {
                    const xAxisData = data.map(item => item.content);
                    const seriesData = data.map(item => item.value);

                    // 获取图表实例
                    var chart = echarts.init(document.getElementById('chart'));
                    // 配置项
                    var option = {
                        title: {
                            text: '马来西亚项目日度焊接图'
                        },
                        xAxis: {
                            type: 'category',
                            data: xAxisData
                        },
                        yAxis: {
                            type: 'value'
                        },
                        series: [{
                            data: seriesData,
                            type: 'line',
                            // 配置标签
                            label: { 
                                show: true, // 显示标签
                                position: 'top' // 标签位置
                            }
                        }]
                    };
                    // 配置项设置给实例
                    chart.setOption(option);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        }

        // 调取更新函数
        upDate();

        // 每隔6小时调取一次后端数据并更新图表
        setInterval(upDate, 6 * 60 * 60 * 1000);
    </script>
</body>
</html>
